# コントロールの類型

## Writer Control

主にキーボードから、文字列を入力されるコントロール。

### 扱うデータ型

#### 文字列

文字列が基本。最もシンプルな形は完全なフリー入力だが、必要に応じて使用可能文字や桁数に制限をかける 。

#### その他プリミティブ

他のプリミティブでは、文字列から変換可能な数値もよく取り扱う。bool値も取り扱えるが、一般的ではない。Symbolはその特殊性から不可能だろう。null, undefinedも普通扱わない。

#### オブジェクト

`input[type=date]`のようにオブジェクトを扱うことも可能。より汎用的には、JSON形式の文字列を入力してObjectとして取り扱うこともできる。文字列とシリアライズ/パース可能であれば取り扱えるといえる。

### 入力の制限

### 表示のフォーマット

### Readonly

### バリデーション

### 標準コントロールの例


## Selector Control

あらかじめ制限されたオプションリストの中から値を選択するコントロール

### 選択数による区別

オプションセットの中から一つを選ぶSingle Selectorと、複数地を選択可能なMulti Selectorに分けられる。

### 取り扱うデータ型

#### 任意のデータ型

Single Selectorでは任意のデータ型をリストにして選択させることができる。リスト間のデータ型が異なっても良いが、扱いにくいので普通は統一する。

#### bool値

Single Selectorの最もシンプルな形式として、bool値を`true`/`false`のセットとして選択させる。

#### 配列

Multi Selectorでは、選択された複数の値を配列として取り扱う。配列の要素の型は任意である。

### オプションインターフェース

選択肢は、選択肢自体としての値と、選択肢の内容をユーザーに提示するためのラベルが必要となる。そのため、選択肢を表現するための`Option`インターフェースは次のような形式になる。

```typescript
interface Option<T> {
  value: T,
  label: string
}
```

コントロールの要件によっては追加のプロパティが必要になるが、その場合は`Option`インターフェースを継承する。例えば、multi selectorで初期の選択状態を表現するために`sselected`プロパティを必要とする場合、次のようになる。

```typescript
interface MultiOption<T> extends Option<T> {
  selected: boolean
}
```

### 選択の通知

`Option`オブジェクトはSelector Controlの表示のためのオブジェクトであり、業務モデルの入力状態を反映したフォームモデルにバインドすべきではない（バインドしてもいいが、変換を必要とする）。モデルにはあくまで業務モデル上の値（`Option.value`）をバインドする。一方、選択された`Option`オブジェクトそのものを必要とするユースケースのために、選択が変更されたことを通知するイベントを実装し、選択された`Option`オブジェクトをイベントオブジェクトとして渡すべきだろう。Multi Selectorの場合、選択状態を反映した`Option`リストを通知する形になる。イベントとしては、標準の選択系htmlコントロールでは`change`イベントが一般的であるので、それに類したイベント名がいいだろう。`select`イベントはテキストボックス等でカーソル選択されたことを通知するイベントなので注意。

### バリデーション

### 標準コントロールの例

## 複合コントロール

## 特殊なコントロール

ファイル選択

## バインドするオブジェクトの備えるべき要件の検討
